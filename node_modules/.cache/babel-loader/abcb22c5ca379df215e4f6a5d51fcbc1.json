{"ast":null,"code":"import _toConsumableArray from\"/Users/rockerbox/capstones/c2-client/mindful/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/rockerbox/capstones/c2-client/mindful/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/rockerbox/capstones/c2-client/mindful/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/rockerbox/capstones/c2-client/mindful/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/rockerbox/capstones/c2-client/mindful/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from'react';import getNumberofEntries from'../helper-funcs';import journalContext from'../journal-context';import moment from'moment';import{Link}from'react-router-dom';import'./stats.css';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import TokenService from'../Auth-Service/token-services';import config from'../config';var Stats=/*#__PURE__*/function(_React$Component){_inherits(Stats,_React$Component);var _super=_createSuper(Stats);function Stats(){_classCallCheck(this,Stats);return _super.apply(this,arguments);}_createClass(Stats,[{key:\"componentDidMount\",value:function componentDidMount(){var _this=this;var token=TokenService.getAuthToken();var options={method:'GET',headers:{'session_token':token}};fetch(\"\".concat(config.API_ENDPOINT,\"/api/validate\"),options).then(function(response){if(response.ok){return response.json();}throw new Error(response.statusText);}).then(function(responseJson){_this.setState({message:responseJson.message});}).catch(function(err){console.log(err.message);_this.props.history.push('/');});}},{key:\"render\",value:function render(){var _this2=this;var posts=this.context.posts;var maxDateStat=function maxDateStat(){var array=[];if(!posts){return'N/A';}else{posts.map(function(posts,i){var formattedDate=moment(_this2.context.posts[i].modified).format('MM/DD/YYYY');array.push(formattedDate);return;});var max=new Date(Math.max.apply(Math,_toConsumableArray(array.map(function(date){return new Date(date);}))));var formattedMax=moment(max).format('MM/DD/YYYY');return formattedMax;}};var statsToDisplay=maxDateStat();return/*#__PURE__*/_jsxs(\"div\",{className:\"stat-container\",children:[this.context.posts?/*#__PURE__*/_jsxs(\"div\",{className:\"stat one\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:\"coffee\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-title\",children:\"Last Moment\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"stat-1\",children:statsToDisplay})]}):null,this.context.posts?/*#__PURE__*/_jsxs(\"div\",{className:\"stat two\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-title\",children:\"Moments\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"stat-2\",children:[\" \",posts.length]})]}):null,/*#__PURE__*/_jsx(\"div\",{className:\"stat-button\",children:/*#__PURE__*/_jsx(Link,{to:\"/add-entry\",children:\"+\"})})]});}}]);return Stats;}(React.Component);Stats.contextType=journalContext;export{Stats as default};","map":{"version":3,"sources":["/Users/rockerbox/capstones/c2-client/mindful/src/Stats/stats.js"],"names":["React","getNumberofEntries","journalContext","moment","Link","FontAwesomeIcon","TokenService","config","Stats","token","getAuthToken","options","method","headers","fetch","API_ENDPOINT","then","response","ok","json","Error","statusText","responseJson","setState","message","catch","err","console","log","props","history","push","posts","context","maxDateStat","array","map","i","formattedDate","modified","format","max","Date","Math","date","formattedMax","statsToDisplay","length","Component","contextType"],"mappings":"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","sourcesContent":["import React from 'react';\nimport getNumberofEntries from '../helper-funcs';\nimport journalContext from '../journal-context';\nimport moment from 'moment';\nimport { Link } from 'react-router-dom';\nimport './stats.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport TokenService from '../Auth-Service/token-services';\nimport config from '../config';\n\n\n\n\nexport default class Stats extends React.Component {\n\n    static contextType = journalContext;\n\n    componentDidMount(){\n        const token = TokenService.getAuthToken();\n        const options = {\n            method: 'GET',\n            headers: {\n                'session_token':token\n            }\n        }\n\n        fetch(`${config.API_ENDPOINT}/api/validate`, options)\n            .then(response => {\n                if(response.ok){\n\n                    return response.json()\n                }\n                throw new Error(response.statusText)\n            })\n            .then( responseJson => {\n                this.setState({\n                    message: responseJson.message\n                })\n            })\n            .catch( err => {\n                console.log(err.message);\n                this.props.history.push('/')\n            })\n\n    }\n\n\n    render(){\n\n    let posts = this.context.posts \n\n    let maxDateStat = () => {\n\n        let array = [];\n        \n        if(!posts){\n            return 'N/A';\n        }       \n        else {\n\n          posts.map( (posts , i) => {\n              let formattedDate = moment(this.context.posts[i].modified).format('MM/DD/YYYY')\n               array.push(formattedDate)\n               return;\n  \n            })\n            \n            let max = new Date(Math.max(...array.map(date => new Date(date))))\n            let formattedMax = moment(max).format('MM/DD/YYYY')\n            return formattedMax;\n    \n      \n            }\n        } \n\n    let statsToDisplay =  maxDateStat() \n\n        return(\n            <div className = 'stat-container'>\n                {this.context.posts ? <div className = \"stat one\"><FontAwesomeIcon icon=\"coffee\" />\n                <span className ='stat-title'>Last Moment</span> <span className ='stat-1'>{statsToDisplay}</span></div>: null }\n                {this.context.posts ? <div className = \"stat two\"><span className ='stat-title'>Moments</span><span className ='stat-2'> {posts.length}</span></div>: null }\n                <div className = \"stat-button\">\n                    <Link to = '/add-entry'>+</Link>\n                </div>\n            </div>\n             \n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}