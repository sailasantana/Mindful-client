{"ast":null,"code":"import _classCallCheck from\"/Users/rockerbox/capstones/c2-client/mindful/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/rockerbox/capstones/c2-client/mindful/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/rockerbox/capstones/c2-client/mindful/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/rockerbox/capstones/c2-client/mindful/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from'react';import journalContext from'../journal-context';import{Link}from'react-router-dom';import config from'../config';import TokenService from'../Auth-Service/token-services';import'./Entries.css';var Entry=/*#__PURE__*/function(_React$Component){_inherits(Entry,_React$Component);var _super=_createSuper(Entry);function Entry(){var _this;_classCallCheck(this,Entry);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.handleClickDelete=function(e){e.preventDefault();var entry_id=_this.props.id;console.log(entry_id);fetch(\"\".concat(config.API_ENDPOINT,\"/api/\").concat(_this.context.user_name,\"/\").concat(entry_id),{method:'DELETE',headers:{'content-type':'application/json','session_token':TokenService.getAuthToken()}}).then(function(res){if(!res.ok){return res.json().then(function(e){return Promise.reject(e);});}return null;}).then(function(){_this.context.deletePost(entry_id);_this.props.onDeleteEntry(entry_id);}).catch(function(error){console.error({error:error});});};return _this;}_createClass(Entry,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var token=TokenService.getAuthToken();var options={method:'GET',headers:{'session_token':token}};fetch(\"\".concat(config.API_ENDPOINT,\"/api/validate\"),options).then(function(response){if(response.ok){return response.json();}throw new Error(response.statusText);}).then(function(responseJson){_this2.setState({message:responseJson.message});}).catch(function(err){console.log(err.message);_this2.props.history.push('/');});}},{key:\"render\",value:function render(){var _this$props=this.props,title=_this$props.title,id=_this$props.id,content=_this$props.content;return/*#__PURE__*/_jsxs(\"div\",{className:\"Entry\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"content\",children:content}),/*#__PURE__*/_jsxs(\"button\",{className:\"Entry-delete-button\",type:\"button\",onClick:this.handleClickDelete,children:[' ',\"Remove\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"Entry-edit-button\",type:\"button\",onClick:this.handleClickEdit,children:/*#__PURE__*/_jsxs(Link,{to:\"/edit/\".concat(id),children:[' ',\"Edit\"]})})]});}}]);return Entry;}(React.Component);Entry.defaultProps={onDeleteEntry:function onDeleteEntry(){}};Entry.contextType=journalContext;export{Entry as default};","map":{"version":3,"sources":["/Users/rockerbox/capstones/c2-client/mindful/src/Entries/Entry.js"],"names":["React","journalContext","Link","config","TokenService","Entry","handleClickDelete","e","preventDefault","entry_id","props","id","console","log","fetch","API_ENDPOINT","context","user_name","method","headers","getAuthToken","then","res","ok","json","Promise","reject","deletePost","onDeleteEntry","catch","error","token","options","response","Error","statusText","responseJson","setState","message","err","history","push","title","content","handleClickEdit","Component","defaultProps","contextType"],"mappings":"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","sourcesContent":["import React from 'react';\nimport journalContext from '../journal-context';\nimport {Link} from 'react-router-dom'\nimport config from '../config'\nimport TokenService from '../Auth-Service/token-services';\nimport './Entries.css'\n\n\n\n\nexport default class Entry extends React.Component {\n    static defaultProps = {\n      onDeleteEntry: () => {}\n    };\n\n    static contextType = journalContext;\n\n    componentDidMount(){\n      const token = TokenService.getAuthToken();\n      const options = {\n          method: 'GET',\n          headers: {\n              'session_token':token\n          }\n      }\n\n      fetch(`${config.API_ENDPOINT}/api/validate`, options)\n          .then(response => {\n              if(response.ok){\n\n                  return response.json()\n              }\n              throw new Error(response.statusText)\n          })\n          .then( responseJson => {\n              this.setState({\n                  message: responseJson.message\n              })\n          })\n          .catch( err => {\n              console.log(err.message);\n              this.props.history.push('/')\n          })\n\n  }\n\n    handleClickDelete = e => {\n      e.preventDefault();\n      const entry_id = this.props.id;\n      console.log(entry_id)\n\n      fetch(`${config.API_ENDPOINT}/api/${this.context.user_name}/${entry_id}`, {\n        method: 'DELETE',\n        headers: {\n          'content-type': 'application/json',\n          'session_token': TokenService.getAuthToken()\n        },\n      })\n      .then (res => {\n        if (!res.ok) {\n          return res.json().then(e => Promise.reject(e));\n        }\n        return null;\n      })\n      .then(() => {\n        this.context.deletePost(entry_id);\n        this.props.onDeleteEntry(entry_id);\n      })\n      .catch(error => {\n        console.error({error});\n      });\n    }\n\n    render () {  \n      const {title , id, content} = this.props; \n\n      return (\n        <div className='Entry'>\n          <h2 className='title'>\n            {title}\n          </h2>\n          <p className='content'>       \n            {content}        \n          </p>\n          <button \n            className='Entry-delete-button' \n            type='button'\n            onClick={this.handleClickDelete}>\n            {' '}\n            Remove\n          </button>\n          <button \n            className='Entry-edit-button' \n            type='button'\n            onClick={this.handleClickEdit}>\n            <Link to={`/edit/${id}`}>\n            {' '}\n            Edit\n            </Link>\n          </button>        \n        </div>\n      )\n    }\n  }"]},"metadata":{},"sourceType":"module"}