{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/rockerbox/capstones/c2-client/mindful/src/Form/Form.js\";\nimport React, { Component } from 'react';\nimport journalContext from '../journal-context';\nimport Mindful from '../MindfulMoment/mindful-store';\nimport config from '../config';\nimport { Link } from 'react-router-dom';\nimport TokenService from '../Auth-Service/token-services';\nimport './Form.css';\n\nclass Form extends Component {\n  constructor(props) {\n    super(props);\n\n    this.submitForm = e => {\n      e.preventDefault();\n      this.setState({\n        error: null,\n        submitted: true\n      });\n      let newEntry = {\n        title: this.titleInput.current.value,\n        content: this.bodyInput.current.value\n      };\n      fetch(`${config.API_ENDPOINT}/api/${this.context.user_name}`, {\n        method: 'POST',\n        headers: {\n          'content-type': 'application/json',\n          'session_token': TokenService.getAuthToken()\n        },\n        body: JSON.stringify(newEntry)\n      }).then(res => {\n        if (!res.ok) {\n          return res.json().then(e => Promise.reject(e));\n        }\n\n        return res.json();\n      }).then(post => {\n        this.context.addPost(post);\n      }).catch(error => {\n        alert({\n          error\n        });\n      });\n    };\n\n    this.handleClick = () => {\n      this.setState({\n        title: '',\n        body: '',\n        submitted: false\n      });\n      this.titleInput = '';\n      this.bodyInput = '';\n      this.props.history.push('/dashboard');\n    };\n\n    this.titleInput = /*#__PURE__*/React.createRef();\n    this.bodyInput = /*#__PURE__*/React.createRef();\n    this.state = {\n      title: '',\n      body: '',\n      error: null,\n      submitted: false,\n      clicked: false\n    };\n  }\n\n  componentDidMount() {\n    const token = TokenService.getAuthToken();\n    const options = {\n      method: 'GET',\n      headers: {\n        'session_token': token\n      }\n    };\n    fetch(`${config.API_ENDPOINT}/api/validate`, options).then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      throw new Error(response.statusText);\n    }).then(responseJson => {\n      this.setState({\n        message: responseJson.message\n      });\n    }).catch(err => {\n      alert('You must be logged in to continue');\n      this.props.history.push('/');\n    });\n  }\n\n  render() {\n    let max = 47;\n\n    function getRandomInt(max) {\n      return Math.floor(Math.random() * Math.floor(max));\n    }\n\n    let quote = Mindful[getRandomInt(max)];\n    let className = 'Pop-up';\n\n    if (this.state.submitted == true) {\n      className += ' Pop-up-active';\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Journal-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"Journal-form-title\",\n        children: [\"Add Today's Entry or \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/scream\",\n          children: \"Scream and Release\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 73\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"Journal-form\",\n        onSubmit: this.submitForm,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Enter title\",\n          ref: this.titleInput,\n          type: \"text\",\n          className: \"Entry-title\",\n          name: \"title\",\n          id: \"title\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          placeholder: \"What's up?\",\n          ref: this.bodyInput,\n          type: \"textarea\",\n          className: \"Entry-content\",\n          name: \"body\",\n          id: \"body\",\n          rows: \"23\",\n          cols: \"70\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"Journal-button\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: className,\n        children: this.state.submitted ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"Pop-up-button\",\n            onClick: this.handleClick,\n            children: \"x\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"Prompt-1\",\n            children: \"Great job getting a Moment in! \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\\"\", quote, \"\\\"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"You can now view this entry in your dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 25\n        }, this) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nForm.contextType = journalContext;\nexport default Form;","map":{"version":3,"sources":["/Users/rockerbox/capstones/c2-client/mindful/src/Form/Form.js"],"names":["React","Component","journalContext","Mindful","config","Link","TokenService","Form","constructor","props","submitForm","e","preventDefault","setState","error","submitted","newEntry","title","titleInput","current","value","content","bodyInput","fetch","API_ENDPOINT","context","user_name","method","headers","getAuthToken","body","JSON","stringify","then","res","ok","json","Promise","reject","post","addPost","catch","alert","handleClick","history","push","createRef","state","clicked","componentDidMount","token","options","response","Error","statusText","responseJson","message","err","render","max","getRandomInt","Math","floor","random","quote","className","contextType"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,cAAP,MAA2B,oBAA3B;AACA,OAAOC,OAAP,MAAoB,gCAApB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,YAAP,MAAyB,gCAAzB;AACA,OAAO,YAAP;;AAGA,MAAMC,IAAN,SAAmBN,SAAnB,CAA6B;AAKzBO,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SA4CnBC,UA5CmB,GA4CLC,CAAD,IAAO;AAEhBA,MAAAA,CAAC,CAACC,cAAF;AACA,WAAKC,QAAL,CAAc;AACVC,QAAAA,KAAK,EAAE,IADG;AAEVC,QAAAA,SAAS,EAAE;AAFD,OAAd;AAKA,UAAIC,QAAQ,GAAG;AACXC,QAAAA,KAAK,EAAE,KAAKC,UAAL,CAAgBC,OAAhB,CAAwBC,KADpB;AAEXC,QAAAA,OAAO,EAAE,KAAKC,SAAL,CAAeH,OAAf,CAAuBC;AAFrB,OAAf;AAKAG,MAAAA,KAAK,CAAE,GAAEnB,MAAM,CAACoB,YAAa,QAAO,KAAKC,OAAL,CAAaC,SAAU,EAAtD,EAAyD;AAC1DC,QAAAA,MAAM,EAAE,MADkD;AAE1DC,QAAAA,OAAO,EAAE;AACL,0BAAgB,kBADX;AAEL,2BAAiBtB,YAAY,CAACuB,YAAb;AAFZ,SAFiD;AAO1DC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAehB,QAAf;AAPoD,OAAzD,CAAL,CASKiB,IATL,CASUC,GAAG,IAAI;AACT,YAAI,CAACA,GAAG,CAACC,EAAT,EAAa;AACT,iBAAOD,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgBtB,CAAC,IAAI0B,OAAO,CAACC,MAAR,CAAe3B,CAAf,CAArB,CAAP;AACH;;AACD,eAAOuB,GAAG,CAACE,IAAJ,EAAP;AACH,OAdL,EAeKH,IAfL,CAeUM,IAAI,IAAI;AACV,aAAKd,OAAL,CAAae,OAAb,CAAqBD,IAArB;AACH,OAjBL,EAkBKE,KAlBL,CAkBW3B,KAAK,IAAI;AACZ4B,QAAAA,KAAK,CAAC;AAAE5B,UAAAA;AAAF,SAAD,CAAL;AACH,OApBL;AAyBH,KAlFkB;;AAAA,SAoFnB6B,WApFmB,GAoFL,MAAM;AAEhB,WAAK9B,QAAL,CAAc;AACVI,QAAAA,KAAK,EAAE,EADG;AAEVa,QAAAA,IAAI,EAAE,EAFI;AAGVf,QAAAA,SAAS,EAAE;AAHD,OAAd;AAOA,WAAKG,UAAL,GAAkB,EAAlB;AACA,WAAKI,SAAL,GAAiB,EAAjB;AAEA,WAAKb,KAAL,CAAWmC,OAAX,CAAmBC,IAAnB,CAAwB,YAAxB;AACH,KAjGkB;;AAEf,SAAK3B,UAAL,gBAAkBlB,KAAK,CAAC8C,SAAN,EAAlB;AACA,SAAKxB,SAAL,gBAAiBtB,KAAK,CAAC8C,SAAN,EAAjB;AAEA,SAAKC,KAAL,GAAa;AACT9B,MAAAA,KAAK,EAAE,EADE;AAETa,MAAAA,IAAI,EAAE,EAFG;AAGThB,MAAAA,KAAK,EAAE,IAHE;AAITC,MAAAA,SAAS,EAAE,KAJF;AAKTiC,MAAAA,OAAO,EAAE;AALA,KAAb;AAQH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChB,UAAMC,KAAK,GAAG5C,YAAY,CAACuB,YAAb,EAAd;AACA,UAAMsB,OAAO,GAAG;AACZxB,MAAAA,MAAM,EAAE,KADI;AAEZC,MAAAA,OAAO,EAAE;AACL,yBAAiBsB;AADZ;AAFG,KAAhB;AAOA3B,IAAAA,KAAK,CAAE,GAAEnB,MAAM,CAACoB,YAAa,eAAxB,EAAwC2B,OAAxC,CAAL,CACKlB,IADL,CACUmB,QAAQ,IAAI;AACd,UAAIA,QAAQ,CAACjB,EAAb,EAAiB;AAEb,eAAOiB,QAAQ,CAAChB,IAAT,EAAP;AACH;;AACD,YAAM,IAAIiB,KAAJ,CAAUD,QAAQ,CAACE,UAAnB,CAAN;AACH,KAPL,EAQKrB,IARL,CAQUsB,YAAY,IAAI;AAClB,WAAK1C,QAAL,CAAc;AACV2C,QAAAA,OAAO,EAAED,YAAY,CAACC;AADZ,OAAd;AAGH,KAZL,EAaKf,KAbL,CAaWgB,GAAG,IAAI;AACVf,MAAAA,KAAK,CAAC,mCAAD,CAAL;AACA,WAAKjC,KAAL,CAAWmC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACH,KAhBL;AAkBH;;AA2DDa,EAAAA,MAAM,GAAG;AAEL,QAAIC,GAAG,GAAG,EAAV;;AAEA,aAASC,YAAT,CAAsBD,GAAtB,EAA2B;AACvB,aAAOE,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBF,IAAI,CAACC,KAAL,CAAWH,GAAX,CAA3B,CAAP;AACH;;AAED,QAAIK,KAAK,GAAG7D,OAAO,CAACyD,YAAY,CAACD,GAAD,CAAb,CAAnB;AAEA,QAAIM,SAAS,GAAG,QAAhB;;AACA,QAAI,KAAKlB,KAAL,CAAWhC,SAAX,IAAwB,IAA5B,EAAkC;AAC9BkD,MAAAA,SAAS,IAAI,gBAAb;AACH;;AAED,wBACI;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA,8BACI;AAAI,QAAA,SAAS,EAAC,oBAAd;AAAA,yDAAwD,QAAC,IAAD;AAAM,UAAA,EAAE,EAAC,SAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAxD;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAM,QAAA,SAAS,EAAC,cAAhB;AAA+B,QAAA,QAAQ,EAAE,KAAKvD,UAA9C;AAAA,gCACI;AACI,UAAA,WAAW,EAAC,aADhB;AAEI,UAAA,GAAG,EAAE,KAAKQ,UAFd;AAGI,UAAA,IAAI,EAAC,MAHT;AAII,UAAA,SAAS,EAAC,aAJd;AAKI,UAAA,IAAI,EAAC,OALT;AAMI,UAAA,EAAE,EAAC,OANP;AAOI,UAAA,QAAQ;AAPZ;AAAA;AAAA;AAAA;AAAA,gBADJ,eAUI;AACI,UAAA,WAAW,EAAC,YADhB;AAEI,UAAA,GAAG,EAAE,KAAKI,SAFd;AAGI,UAAA,IAAI,EAAC,UAHT;AAII,UAAA,SAAS,EAAC,eAJd;AAKI,UAAA,IAAI,EAAC,MALT;AAMI,UAAA,EAAE,EAAC,MANP;AAOI,UAAA,IAAI,EAAC,IAPT;AAQI,UAAA,IAAI,EAAC,IART;AASI,UAAA,QAAQ;AATZ;AAAA;AAAA;AAAA;AAAA,gBAVJ,eAqBI;AAAQ,UAAA,SAAS,EAAC,gBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBArBJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,eA0BI;AAAK,QAAA,SAAS,EAAE2C,SAAhB;AAAA,kBACK,KAAKlB,KAAL,CAAWhC,SAAX,gBACG;AAAA,kCACI;AAAQ,YAAA,SAAS,EAAC,eAAlB;AAAkC,YAAA,OAAO,EAAE,KAAK4B,WAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAI,YAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAGI;AAAA,6BAAKqB,KAAL;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADH,GAMY;AAPjB;AAAA;AAAA;AAAA;AAAA,cA1BJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAsCH;;AA/JwB;;AAAvBzD,I,CAGK2D,W,GAAchE,c;AA+JzB,eAAeK,IAAf","sourcesContent":["import React, { Component } from 'react'\nimport journalContext from '../journal-context'\nimport Mindful from '../MindfulMoment/mindful-store'\nimport config from '../config'\nimport { Link } from 'react-router-dom'\nimport TokenService from '../Auth-Service/token-services'\nimport './Form.css'\n\n\nclass Form extends Component {\n\n\n    static contextType = journalContext\n\n    constructor(props) {\n        super(props)\n        this.titleInput = React.createRef();\n        this.bodyInput = React.createRef();\n\n        this.state = {\n            title: '',\n            body: '',\n            error: null,\n            submitted: false,\n            clicked: false\n        }\n\n    }\n\n    componentDidMount() {\n        const token = TokenService.getAuthToken();\n        const options = {\n            method: 'GET',\n            headers: {\n                'session_token': token\n            }\n        }\n\n        fetch(`${config.API_ENDPOINT}/api/validate`, options)\n            .then(response => {\n                if (response.ok) {\n\n                    return response.json()\n                }\n                throw new Error(response.statusText)\n            })\n            .then(responseJson => {\n                this.setState({\n                    message: responseJson.message\n                })\n            })\n            .catch(err => {\n                alert('You must be logged in to continue')\n                this.props.history.push('/')\n            })\n\n    }\n\n    submitForm = (e) => {\n\n        e.preventDefault();\n        this.setState({\n            error: null,\n            submitted: true\n        })\n\n        let newEntry = {\n            title: this.titleInput.current.value,\n            content: this.bodyInput.current.value\n        }\n\n        fetch(`${config.API_ENDPOINT}/api/${this.context.user_name}`, {\n            method: 'POST',\n            headers: {\n                'content-type': 'application/json',\n                'session_token': TokenService.getAuthToken()\n\n            },\n            body: JSON.stringify(newEntry),\n        })\n            .then(res => {\n                if (!res.ok) {\n                    return res.json().then(e => Promise.reject(e))\n                }\n                return res.json()\n            })\n            .then(post => {\n                this.context.addPost(post)\n            })\n            .catch(error => {\n                alert({ error })\n            })\n\n\n\n\n    }\n\n    handleClick = () => {\n\n        this.setState({\n            title: '',\n            body: '',\n            submitted: false\n\n        })\n\n        this.titleInput = ''\n        this.bodyInput = ''\n\n        this.props.history.push('/dashboard')\n    }\n\n\n\n    render() {\n\n        let max = 47;\n\n        function getRandomInt(max) {\n            return Math.floor(Math.random() * Math.floor(max));\n        }\n\n        let quote = Mindful[getRandomInt(max)]\n\n        let className = 'Pop-up';\n        if (this.state.submitted == true) {\n            className += ' Pop-up-active';\n        }\n\n        return (\n            <div className='Journal-container'>\n                <h2 className=\"Journal-form-title\">Add Today's Entry or <Link to='/scream'>Scream and Release</Link></h2>\n                <form className=\"Journal-form\" onSubmit={this.submitForm}>\n                    <input\n                        placeholder=\"Enter title\"\n                        ref={this.titleInput}\n                        type=\"text\"\n                        className='Entry-title'\n                        name=\"title\"\n                        id=\"title\"\n                        required\n                    />\n                    <textarea\n                        placeholder=\"What's up?\"\n                        ref={this.bodyInput}\n                        type=\"textarea\"\n                        className='Entry-content'\n                        name=\"body\"\n                        id=\"body\"\n                        rows=\"23\"\n                        cols=\"70\"\n                        required\n                    />\n                    <button className=\"Journal-button\">Submit</button>\n\n                </form>\n                <div className={className}>\n                    {this.state.submitted ?\n                        <div>\n                            <button className='Pop-up-button' onClick={this.handleClick}>x</button>\n                            <h3 className='Prompt-1'>Great job getting a Moment in! </h3>\n                            <p>\"{quote}\"</p>\n                            <p>You can now view this entry in your dashboard</p>\n                        </div> : null}\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Form;"]},"metadata":{},"sourceType":"module"}