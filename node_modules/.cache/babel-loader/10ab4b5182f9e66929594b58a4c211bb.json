{"ast":null,"code":"import _classCallCheck from\"/Users/rockerbox/capstones/c2-client/mindful/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/rockerbox/capstones/c2-client/mindful/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/rockerbox/capstones/c2-client/mindful/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/rockerbox/capstones/c2-client/mindful/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React from'react';import{Link}from'react-router-dom';import AuthApiService from'../Auth-Service/api-auth-service';import TokenService from'../Auth-Service/token-services';import journalContext from'../journal-context';import config from'../config';import'./LoginSignUp.css';var LoginPage=/*#__PURE__*/function(_React$Component){_inherits(LoginPage,_React$Component);var _super=_createSuper(LoginPage);function LoginPage(props){var _this;_classCallCheck(this,LoginPage);_this=_super.call(this,props);_this.handleJwtLoginAuth=function(e){e.preventDefault();_this.setState({error:null});AuthApiService.postLogin({user_name:_this.userInput.current.value,password:_this.passInput.current.value}).then(function(res){localStorage.setItem('user_name',_this.userInput.current.value);_this.context.setUserName(_this.userInput.current.value);TokenService.saveAuthToken(res.token);_this.props.onvalidLogin();}).then(function(){_this.props.history.push('/dashboard');}).catch(function(res){_this.setState({error:alert(\"Invalid username or password. Please re-enter your credentials.\")});});};_this.userInput=/*#__PURE__*/React.createRef();_this.passInput=/*#__PURE__*/React.createRef();_this.state={error:null,posts:[]};return _this;}//handle login auth and validation upon form submission and \n//get user's entries + set them into context\n_createClass(LoginPage,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{class:\"login\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"logo\",src:\"/logo.png\",width:\"210\",height:\"180\"}),/*#__PURE__*/_jsx(\"div\",{className:\"login-triangle\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"login-header\",children:\"Log in to continue\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"login-container\",onSubmit:this.handleJwtLoginAuth,children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"username\",ref:this.userInput,placeholder:\"Username\"})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",ref:this.passInput,placeholder:\"Password\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",value:\"Log in\",className:\"login-button\",children:\"Log In\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"Sign-up-prompt\",children:/*#__PURE__*/_jsx(Link,{to:\"./sign-up\",children:\"New User? Sign Up here!\"})})]});}}]);return LoginPage;}(React.Component);LoginPage.defaultProps={onvalidLogin:function onvalidLogin(){}};LoginPage.contextType=journalContext;export{LoginPage as default};","map":{"version":3,"sources":["/Users/rockerbox/capstones/c2-client/mindful/src/Login/Login.js"],"names":["React","Link","AuthApiService","TokenService","journalContext","config","LoginPage","props","handleJwtLoginAuth","e","preventDefault","setState","error","postLogin","user_name","userInput","current","value","password","passInput","then","res","localStorage","setItem","context","setUserName","saveAuthToken","token","onvalidLogin","history","push","catch","alert","createRef","state","posts","Component","defaultProps","contextType"],"mappings":"otBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kCAA3B,CACA,MAAOC,CAAAA,YAAP,KAAyB,gCAAzB,CACA,MAAOC,CAAAA,cAAP,KAA2B,oBAA3B,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CACA,MAAO,mBAAP,C,GAGqBC,CAAAA,S,kHAQlB,mBAAYC,KAAZ,CAAkB,2CACd,uBAAMA,KAAN,EADc,MAgBlBC,kBAhBkB,CAgBG,SAAAC,CAAC,CAAI,CACtBA,CAAC,CAACC,cAAF,GACA,MAAKC,QAAL,CAAc,CACVC,KAAK,CAAE,IADG,CAAd,EAIAV,cAAc,CAACW,SAAf,CAAyB,CACrBC,SAAS,CAAC,MAAKC,SAAL,CAAeC,OAAf,CAAuBC,KADZ,CAErBC,QAAQ,CAAG,MAAKC,SAAL,CAAeH,OAAf,CAAuBC,KAFb,CAAzB,EAKCG,IALD,CAKM,SAAAC,GAAG,CAAI,CACTC,YAAY,CAACC,OAAb,CAAsB,WAAtB,CAAmC,MAAKR,SAAL,CAAeC,OAAf,CAAuBC,KAA1D,EACA,MAAKO,OAAL,CAAaC,WAAb,CAAyB,MAAKV,SAAL,CAAeC,OAAf,CAAuBC,KAAhD,EACAd,YAAY,CAACuB,aAAb,CAA2BL,GAAG,CAACM,KAA/B,EACA,MAAKpB,KAAL,CAAWqB,YAAX,GAEH,CAXD,EAYCR,IAZD,CAYM,UAAM,CACR,MAAKb,KAAL,CAAWsB,OAAX,CAAmBC,IAAnB,CAAwB,YAAxB,EACH,CAdD,EAeCC,KAfD,CAeO,SAAAV,GAAG,CAAI,CACV,MAAKV,QAAL,CAAc,CACVC,KAAK,CAAEoB,KAAK,CAAC,iEAAD,CADF,CAAd,EAGH,CAnBD,EAqBH,CA3CiB,CAEd,MAAKjB,SAAL,cAAiBf,KAAK,CAACiC,SAAN,EAAjB,CACA,MAAKd,SAAL,cAAiBnB,KAAK,CAACiC,SAAN,EAAjB,CAGA,MAAKC,KAAL,CAAc,CACVtB,KAAK,CAAG,IADE,CAEVuB,KAAK,CAAG,EAFE,CAAd,CANc,aAUjB,CAID;AACA;6DAgCS,CAEJ,mBACI,aAAK,KAAK,CAAC,OAAX,wBACA,YAAK,SAAS,CAAG,MAAjB,CAAwB,GAAG,CAAC,WAA5B,CAAwC,KAAK,CAAC,KAA9C,CAAoD,MAAM,CAAC,KAA3D,EADA,cAEE,YAAK,SAAS,CAAC,gBAAf,EAFF,cAGE,WAAI,SAAS,CAAC,cAAd,gCAHF,cAIE,cAAM,SAAS,CAAC,iBAAhB,CAAmC,QAAQ,CAAI,KAAK3B,kBAApD,wBACE,gCAAG,cAAO,IAAI,CAAC,UAAZ,CAAuB,GAAG,CAAE,KAAKO,SAAjC,CAA4C,WAAW,CAAC,UAAxD,EAAH,EADF,cAEE,gCAAG,cAAO,IAAI,CAAC,UAAZ,CAAuB,GAAG,CAAE,KAAKI,SAAjC,CAA4C,WAAW,CAAC,UAAxD,EAAH,EAFF,cAGE,eAAQ,IAAI,CAAC,QAAb,CAAsB,KAAK,CAAC,QAA5B,CAAqC,SAAS,CAAC,cAA/C,oBAHF,GAJF,cASC,UAAG,SAAS,CAAE,gBAAd,uBAA+B,KAAC,IAAD,EAAM,EAAE,CAAE,WAAV,qCAA/B,EATD,GADJ,CAYH,C,uBArEkCnB,KAAK,CAACoC,S,EAAxB9B,S,CAEX+B,Y,CAAe,CAClBT,YAAY,CAAE,uBAAM,CAAE,CADJ,C,CAFJtB,S,CAMXgC,W,CAAclC,c,QANHE,S","sourcesContent":["import React from 'react'\nimport { Link } from 'react-router-dom'\nimport AuthApiService from '../Auth-Service/api-auth-service';\nimport TokenService from '../Auth-Service/token-services';\nimport journalContext from '../journal-context';\nimport config from '../config'\nimport './LoginSignUp.css'\n\n\nexport default class LoginPage extends React.Component {\n\n   static defaultProps = {\n       onvalidLogin: () => {}\n   }; \n\n   static contextType = journalContext;\n\n   constructor(props){\n       super(props);\n       this.userInput = React.createRef();\n       this.passInput = React.createRef();\n\n\n       this.state  = {\n           error : null,\n           posts : []\n    };\n   }\n\n\n\n   //handle login auth and validation upon form submission and \n   //get user's entries + set them into context\n   handleJwtLoginAuth = e => {\n       e.preventDefault();\n       this.setState({\n           error: null\n       });\n\n       AuthApiService.postLogin({\n           user_name:this.userInput.current.value,\n           password : this.passInput.current.value\n        \n       })\n       .then(res => {\n           localStorage.setItem( 'user_name', this.userInput.current.value );       \n           this.context.setUserName(this.userInput.current.value) \n           TokenService.saveAuthToken(res.token);\n           this.props.onvalidLogin();\n           \n       })\n       .then(() => {\n           this.props.history.push('/dashboard') \n       })\n       .catch(res => {\n           this.setState({\n               error: alert(\"Invalid username or password. Please re-enter your credentials.\")\n           })\n       })\n\n   }\n\n  \n\n    render(){\n\n        return (\n            <div class=\"login\">   \n            <img className = \"logo\" src=\"/logo.png\" width=\"210\" height=\"180\"/>\n              <div className=\"login-triangle\"></div>\n              <h2 className=\"login-header\">Log in to continue</h2>\n              <form className=\"login-container\"  onSubmit = {this.handleJwtLoginAuth}>\n                <p><input type=\"username\" ref={this.userInput} placeholder=\"Username\"/></p>\n                <p><input type=\"password\" ref={this.passInput} placeholder=\"Password\"/></p>\n                <button type=\"submit\" value=\"Log in\" className='login-button'>Log In</button>\n              </form>\n             <p className= 'Sign-up-prompt'><Link to ='./sign-up'>New User? Sign Up here!</Link></p> \n            </div>)\n    }\n\n\n}"]},"metadata":{},"sourceType":"module"}