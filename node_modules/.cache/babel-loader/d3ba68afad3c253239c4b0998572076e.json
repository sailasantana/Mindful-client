{"ast":null,"code":"import _classCallCheck from\"/Users/rockerbox/capstones/c2-client/mindful/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/rockerbox/capstones/c2-client/mindful/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/rockerbox/capstones/c2-client/mindful/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/rockerbox/capstones/c2-client/mindful/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Component}from'react';import journalContext from'../journal-context';import Mindful from'../MindfulMoment/mindful-store';import config from'../config';import{Link}from'react-router-dom';import TokenService from'../Auth-Service/token-services';import'./Form.css';//you can just use controlled inputs   \nvar Form=/*#__PURE__*/function(_Component){_inherits(Form,_Component);var _super=_createSuper(Form);function Form(props){var _this;_classCallCheck(this,Form);_this=_super.call(this,props);_this.submitForm=function(e){e.preventDefault();console.log('abc');_this.setState({error:null,submitted:true});var newEntry={title:_this.titleInput.current.value,content:_this.bodyInput.current.value};fetch(\"\".concat(config.API_ENDPOINT,\"/api/\").concat(_this.context.user_name),{method:'POST',headers:{'content-type':'application/json','session_token':TokenService.getAuthToken()},body:JSON.stringify(newEntry)}).then(function(res){if(!res.ok){return res.json().then(function(e){return Promise.reject(e);});}return res.json();}).then(function(post){_this.context.addPost(post);}).catch(function(error){alert({error:error});});};_this.handleClick=function(){_this.setState({title:'',body:'',submitted:false});_this.titleInput='';_this.bodyInput='';_this.props.history.push('/dashboard');};_this.titleInput=/*#__PURE__*/React.createRef();_this.bodyInput=/*#__PURE__*/React.createRef();_this.state={title:'',body:'',error:null,submitted:false,clicked:false};return _this;}_createClass(Form,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var token=TokenService.getAuthToken();var options={method:'GET',headers:{'session_token':token}};fetch(\"\".concat(config.API_ENDPOINT,\"/api/validate\"),options).then(function(response){if(response.ok){return response.json();}throw new Error(response.statusText);}).then(function(responseJson){_this2.setState({message:responseJson.message});}).catch(function(err){console.log(err.message);_this2.props.history.push('/');});}},{key:\"render\",value:function render(){var max=47;function getRandomInt(max){return Math.floor(Math.random()*Math.floor(max));}var quote=Mindful[getRandomInt(max)];var className='Pop-up';if(this.state.submitted==true){className+=' Pop-up-active';}return/*#__PURE__*/_jsxs(\"div\",{className:\"Journal-container\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"Journal-form-title\",children:[\"Add Today's Entry or \",/*#__PURE__*/_jsx(Link,{to:\"/scream\",children:\"Scream and Release\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"Journal-form\",onSubmit:this.submitForm,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter title\",ref:this.titleInput,type:\"text\",className:\"Entry-title\",name:\"title\",id:\"title\",required:true}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"What's up?\",ref:this.bodyInput,type:\"textarea\",className:\"Entry-content\",name:\"body\",id:\"body\",rows:\"23\",cols:\"70\",required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"Journal-button\",children:\"Submit\"})]}),/*#__PURE__*/_jsx(\"div\",{className:className,children:this.state.submitted?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"Prompt-1\",children:\"Great job getting a Moment in!\"}),/*#__PURE__*/_jsx(\"button\",{className:\"Pop-up-button\",onClick:this.handleClick,children:\"x\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\\"\",quote,\"\\\"\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"You can now view this entry in your dashboard\"})]}):null})]});}}]);return Form;}(Component);Form.contextType=journalContext;export default Form;","map":{"version":3,"sources":["/Users/rockerbox/capstones/c2-client/mindful/src/Form/Form.js"],"names":["React","Component","journalContext","Mindful","config","Link","TokenService","Form","props","submitForm","e","preventDefault","console","log","setState","error","submitted","newEntry","title","titleInput","current","value","content","bodyInput","fetch","API_ENDPOINT","context","user_name","method","headers","getAuthToken","body","JSON","stringify","then","res","ok","json","Promise","reject","post","addPost","catch","alert","handleClick","history","push","createRef","state","clicked","token","options","response","Error","statusText","responseJson","message","err","max","getRandomInt","Math","floor","random","quote","className","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport journalContext from '../journal-context'\nimport Mindful from '../MindfulMoment/mindful-store'\nimport config from '../config'\nimport { Link } from 'react-router-dom'\nimport TokenService from '../Auth-Service/token-services'\nimport './Form.css'\n\n//you can just use controlled inputs   \n\nclass Form extends Component {\n\n   \n    static contextType = journalContext\n\n    constructor(props) {\n        super(props)\n        this.titleInput = React.createRef();\n        this.bodyInput = React.createRef();       \n\n        this.state = {\n            title: '',\n            body: '',\n            error: null,\n            submitted: false,\n            clicked : false\n        }\n\n    }\n\n    componentDidMount(){\n        const token = TokenService.getAuthToken();\n        const options = {\n            method: 'GET',\n            headers: {\n                'session_token':token\n            }\n        }\n\n        fetch(`${config.API_ENDPOINT}/api/validate`, options)\n            .then(response => {\n                if(response.ok){\n\n                    return response.json()\n                }\n                throw new Error(response.statusText)\n            })\n            .then( responseJson => {\n                this.setState({\n                    message: responseJson.message\n                })\n            })\n            .catch( err => {\n                console.log(err.message);\n                this.props.history.push('/')\n            })\n\n    }\n \n    submitForm = (e) => {\n\n        e.preventDefault();\n        console.log('abc')\n        this.setState({\n            error: null,\n            submitted: true\n        })\n\n        let newEntry = {\n            title : this.titleInput.current.value,\n            content: this.bodyInput.current.value\n        }\n\n       fetch(`${config.API_ENDPOINT}/api/${this.context.user_name}`,  {\n        method: 'POST',\n        headers: {\n            'content-type': 'application/json',\n            'session_token': TokenService.getAuthToken()\n\n        },\n        body: JSON.stringify(newEntry),\n        })\n        .then(res => {\n            if(!res.ok){\n                return res.json().then(e => Promise.reject(e))\n            }\n            return res.json()\n        })\n        .then(post => {\n            this.context.addPost(post)\n        })\n        .catch(error => {\n            alert({error})\n        })\n\n    \n        \n\n    }\n\n    handleClick = () => {\n        \n        this.setState({\n            title: '',\n            body: '',\n            submitted: false\n        \n        })\n\n        this.titleInput = ''\n        this.bodyInput = ''\n\n        this.props.history.push('/dashboard')\n    }\n\n\n\n    render() {\n\n        let max = 47;\n         \n        function getRandomInt(max) {\n            return Math.floor(Math.random() * Math.floor(max));\n          }\n        \n        let quote = Mindful[getRandomInt(max)]\n\n        let className='Pop-up';\n        if (this.state.submitted == true) {\n          className += ' Pop-up-active';\n        }\n\n        return (\n            <div className= 'Journal-container'>\n                <h2 className = \"Journal-form-title\">Add Today's Entry or <Link to = '/scream'>Scream and Release</Link></h2>\n                <form className = \"Journal-form\" onSubmit={this.submitForm}>\n                        <input \n                            placeholder=\"Enter title\"\n                            ref = {this.titleInput}\n                            type=\"text\"\n                            className = 'Entry-title'\n                            name=\"title\"\n                            id=\"title\"\n                            required\n                            />\n                        <textarea \n                            placeholder=\"What's up?\"\n                            ref = {this.bodyInput}\n                            type=\"textarea\"\n                            className = 'Entry-content'\n                            name=\"body\"\n                            id=\"body\"\n                            rows = \"23\" \n                            cols=\"70\"\n                            required\n                             />\n                        <button className = \"Journal-button\">Submit</button>\n\n                </form>\n                <div className = {className}> \n                    {this.state.submitted ? \n                    <div>\n                    <h3 className='Prompt-1'>Great job getting a Moment in!</h3>\n                    <button className='Pop-up-button' onClick = {this.handleClick}>x</button>\n                    <p>\"{quote}\"</p>\n                    <p>You can now view this entry in your dashboard</p>\n                    </div> : null}\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Form;"]},"metadata":{},"sourceType":"module"}